# ğŸ” å¾®ä¿¡å°ç¨‹åºç™»å½•åŠŸèƒ½å®Œæ•´å¯¹æ¥æ–‡æ¡£

## ğŸ“‹ åŠŸèƒ½æ¦‚è¿°

åŸºäºå¾®ä¿¡å®˜æ–¹çš„ [code2Session](https://developers.weixin.qq.com/miniprogram/dev/OpenApiDoc/user-login/code2Session.html) æ¥å£å®ç°çš„å°ç¨‹åºç™»å½•åŠŸèƒ½ã€‚

### ç™»å½•æµç¨‹å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å°ç¨‹åº  â”‚         â”‚  åç«¯   â”‚         â”‚  å¾®ä¿¡   â”‚         â”‚  æ•°æ®åº“  â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
     â”‚                   â”‚                   â”‚                   â”‚
     â”‚ 1. wx.login()     â”‚                   â”‚                   â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                   â”‚                   â”‚
     â”‚ è¿”å› code         â”‚                   â”‚                   â”‚
     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                   â”‚                   â”‚
     â”‚                   â”‚                   â”‚                   â”‚
     â”‚ 2. POST /api/user/wxLogin             â”‚                   â”‚
     â”‚      {code}       â”‚                   â”‚                   â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                   â”‚                   â”‚
     â”‚                   â”‚ 3. code2Session   â”‚                   â”‚
     â”‚                   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                   â”‚
     â”‚                   â”‚ openid,session_keyâ”‚                   â”‚
     â”‚                   â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                   â”‚
     â”‚                   â”‚                   â”‚                   â”‚
     â”‚                   â”‚ 4. æŸ¥è¯¢/åˆ›å»ºç”¨æˆ·            â”‚
     â”‚                   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
     â”‚                   â”‚      ç”¨æˆ·ä¿¡æ¯              â”‚
     â”‚                   â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
     â”‚                   â”‚                   â”‚                   â”‚
     â”‚                   â”‚ 5. ç”Ÿæˆtoken      â”‚                   â”‚
     â”‚                   â”‚ (Sa-Token)        â”‚                   â”‚
     â”‚                   â”‚                   â”‚                   â”‚
     â”‚ 6. è¿”å› {token, userInfo}             â”‚                   â”‚
     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                   â”‚                   â”‚
     â”‚                   â”‚                   â”‚                   â”‚
     â”‚ 7. å­˜å‚¨token      â”‚                   â”‚                   â”‚
     â”‚ wx.setStorageSync â”‚                   â”‚                   â”‚
     â”‚                   â”‚                   â”‚                   â”‚
```

---

## ğŸ”§ åç«¯å®ç°ï¼ˆå·²å®Œæˆï¼‰

### 1. é…ç½®å¾®ä¿¡å°ç¨‹åºä¿¡æ¯

**æ–‡ä»¶ï¼š** `src/main/resources/application.yml`

```yaml
# å¾®ä¿¡å°ç¨‹åºé…ç½®
wx:
  mini:
    appid: your-appid-here      # æ›¿æ¢ä¸ºä½ çš„å°ç¨‹åºAppID
    secret: your-secret-here     # æ›¿æ¢ä¸ºä½ çš„å°ç¨‹åºAppSecret
```

**âš ï¸ é‡è¦ï¼š**
- éœ€è¦åˆ°[å¾®ä¿¡å…¬ä¼—å¹³å°](https://mp.weixin.qq.com/)è·å– AppID å’Œ AppSecret
- å¼€å‘ > å¼€å‘ç®¡ç† > å¼€å‘è®¾ç½® > å¼€å‘è€…ID

### 2. æ ¸å¿ƒæ–‡ä»¶

#### â‘  WxLoginDTO.java
**ä½ç½®ï¼š** `src/main/java/com/tsuki/yuntun/java/app/dto/WxLoginDTO.java`

```java
@Data
public class WxLoginDTO {
    @NotBlank(message = "codeä¸èƒ½ä¸ºç©º")
    private String code;         // å¾®ä¿¡ç™»å½•å‡­è¯ï¼ˆå¿…ä¼ ï¼‰
    
    private String nickName;     // ç”¨æˆ·æ˜µç§°ï¼ˆå¯é€‰ï¼‰
    private String avatar;       // ç”¨æˆ·å¤´åƒï¼ˆå¯é€‰ï¼‰
}
```

#### â‘¡ WxApiUtil.java
**ä½ç½®ï¼š** `src/main/java/com/tsuki/yuntun/java/util/WxApiUtil.java`

æ ¸å¿ƒæ–¹æ³•ï¼š
- `code2Session(String code)` - è°ƒç”¨å¾®ä¿¡æ¥å£
- `getOpenid()` - è·å–openid
- `getUnionid()` - è·å–unionid
- `getSessionKey()` - è·å–session_key

#### â‘¢ UserServiceImpl.wxLogin()
**ä½ç½®ï¼š** `src/main/java/com/tsuki/yuntun/java/app/service/impl/UserServiceImpl.java`

ç™»å½•é€»è¾‘ï¼š
1. è°ƒç”¨å¾®ä¿¡code2Sessionæ¥å£
2. è·å–openidå’Œunionid
3. æŸ¥è¯¢ç”¨æˆ·æ˜¯å¦å­˜åœ¨
4. ä¸å­˜åœ¨åˆ™åˆ›å»ºæ–°ç”¨æˆ·
5. ä½¿ç”¨Sa-Tokenç”Ÿæˆtoken
6. è¿”å›tokenå’Œç”¨æˆ·ä¿¡æ¯

#### â‘£ UserController.wxLogin()
**ä½ç½®ï¼š** `src/main/java/com/tsuki/yuntun/java/app/controller/UserController.java`

```java
@PostMapping("/wxLogin")
public Result<LoginVO> wxLogin(@Valid @RequestBody WxLoginDTO dto) {
    LoginVO vo = userService.wxLogin(dto);
    return Result.success(vo);
}
```

### 3. æ¥å£ä¿¡æ¯

**æ¥å£åœ°å€ï¼š** `POST /api/user/wxLogin`

**è¯·æ±‚å‚æ•°ï¼š**
```json
{
  "code": "081xxxxx",      // å¿…å¡«ï¼šå¾®ä¿¡ç™»å½•å‡­è¯
  "nickName": "ç”¨æˆ·æ˜µç§°",   // å¯é€‰ï¼šç”¨æˆ·æ˜µç§°
  "avatar": "å¤´åƒURL"      // å¯é€‰ï¼šç”¨æˆ·å¤´åƒ
}
```

**å“åº”æ•°æ®ï¼š**
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "token": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx",
    "isNewUser": false,
    "userInfo": {
      "id": 1,
      "nickname": "ç”¨æˆ·æ˜µç§°",
      "avatar": "å¤´åƒURL",
      "phone": null,
      "points": 0,
      "status": 1
    }
  }
}
```

### 4. é”™è¯¯ç è¯´æ˜

| errcode | è¯´æ˜ | è§£å†³æ–¹æ¡ˆ |
|---------|------|---------|
| 40029 | codeæ— æ•ˆ | codeå·²è¿‡æœŸæˆ–å·²ä½¿ç”¨ï¼Œéœ€é‡æ–°è°ƒç”¨wx.login() |
| 45011 | APIè°ƒç”¨å¤ªé¢‘ç¹ | ç¨åé‡è¯• |
| 40226 | é«˜é£é™©ç”¨æˆ· | ç”¨æˆ·è¢«æ‹¦æˆªï¼Œæ— æ³•ç™»å½• |
| -1 | ç³»ç»Ÿç¹å¿™ | å¾®ä¿¡æœåŠ¡å™¨ç¹å¿™ï¼Œç¨åé‡è¯• |

---

## ğŸ“± å‰ç«¯å®ç°æŒ‡å—

### 1. å°ç¨‹åºç«¯ç™»å½•æµç¨‹

#### Step 1: è°ƒç”¨wx.loginè·å–code

```javascript
// pages/login/login.js
Page({
  data: {
    userInfo: null,
    hasUserInfo: false
  },

  /**
   * å¾®ä¿¡ç™»å½•
   */
  wxLogin() {
    wx.showLoading({
      title: 'ç™»å½•ä¸­...'
    });

    // 1. è·å–å¾®ä¿¡ç™»å½•å‡­è¯code
    wx.login({
      success: (res) => {
        if (res.code) {
          console.log('è·å–codeæˆåŠŸï¼š', res.code);
          // 2. å°†codeå‘é€åˆ°åç«¯
          this.sendCodeToBackend(res.code);
        } else {
          wx.hideLoading();
          wx.showToast({
            title: 'è·å–ç™»å½•å‡­è¯å¤±è´¥',
            icon: 'none'
          });
        }
      },
      fail: (err) => {
        wx.hideLoading();
        wx.showToast({
          title: 'ç™»å½•å¤±è´¥',
          icon: 'none'
        });
        console.error('wx.loginå¤±è´¥ï¼š', err);
      }
    });
  },

  /**
   * å‘é€codeåˆ°åç«¯
   */
  sendCodeToBackend(code) {
    wx.request({
      url: 'https://your-domain.com/api/user/wxLogin',
      method: 'POST',
      data: {
        code: code,
        // å¯é€‰ï¼šä¼ é€’ç”¨æˆ·æ˜µç§°å’Œå¤´åƒ
        // nickName: this.data.userInfo?.nickName,
        // avatar: this.data.userInfo?.avatarUrl
      },
      header: {
        'content-type': 'application/json'
      },
      success: (res) => {
        wx.hideLoading();
        
        if (res.data.code === 200) {
          const { token, userInfo, isNewUser } = res.data.data;
          
          // 3. å­˜å‚¨token
          wx.setStorageSync('token', token);
          wx.setStorageSync('userInfo', userInfo);
          
          console.log('ç™»å½•æˆåŠŸï¼š', userInfo);
          console.log('æ˜¯å¦æ–°ç”¨æˆ·ï¼š', isNewUser);
          
          // 4. ç™»å½•æˆåŠŸæç¤º
          wx.showToast({
            title: isNewUser ? 'æ³¨å†ŒæˆåŠŸ' : 'ç™»å½•æˆåŠŸ',
            icon: 'success'
          });
          
          // 5. è·³è½¬åˆ°é¦–é¡µ
          wx.switchTab({
            url: '/pages/index/index'
          });
        } else {
          wx.showToast({
            title: res.data.message || 'ç™»å½•å¤±è´¥',
            icon: 'none'
          });
        }
      },
      fail: (err) => {
        wx.hideLoading();
        wx.showToast({
          title: 'ç½‘ç»œè¯·æ±‚å¤±è´¥',
          icon: 'none'
        });
        console.error('è¯·æ±‚å¤±è´¥ï¼š', err);
      }
    });
  }
});
```

#### Step 2: è·å–ç”¨æˆ·ä¿¡æ¯ï¼ˆå¯é€‰ï¼‰

```javascript
/**
 * è·å–ç”¨æˆ·ä¿¡æ¯ï¼ˆéœ€è¦ç”¨æˆ·æˆæƒï¼‰
 */
getUserProfile() {
  wx.getUserProfile({
    desc: 'ç”¨äºå®Œå–„ä¼šå‘˜èµ„æ–™',
    success: (res) => {
      console.log('ç”¨æˆ·ä¿¡æ¯ï¼š', res.userInfo);
      this.setData({
        userInfo: res.userInfo,
        hasUserInfo: true
      });
      
      // è·å–ç”¨æˆ·ä¿¡æ¯åå†ç™»å½•
      this.wxLogin();
    },
    fail: (err) => {
      wx.showToast({
        title: 'è·å–ç”¨æˆ·ä¿¡æ¯å¤±è´¥',
        icon: 'none'
      });
      console.error('getUserProfileå¤±è´¥ï¼š', err);
    }
  });
}
```

### 2. é¡µé¢ç¤ºä¾‹ï¼ˆWXMLï¼‰

```xml
<!-- pages/login/login.wxml -->
<view class="container">
  <view class="login-box">
    <image class="logo" src="/images/logo.png"></image>
    <text class="title">æ¬¢è¿ä½¿ç”¨äº‘åç‚¹é¤</text>
    
    <!-- å¦‚æœéœ€è¦ç”¨æˆ·ä¿¡æ¯æˆæƒ -->
    <button class="login-btn" bind:tap="getUserProfile" wx:if="{{!hasUserInfo}}">
      è·å–ç”¨æˆ·ä¿¡æ¯
    </button>
    
    <!-- ç›´æ¥ç™»å½• -->
    <button class="login-btn" bind:tap="wxLogin" wx:else>
      å¾®ä¿¡ä¸€é”®ç™»å½•
    </button>
  </view>
</view>
```

### 3. æ ·å¼ç¤ºä¾‹ï¼ˆWXSSï¼‰

```css
/* pages/login/login.wxss */
.container {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: 100vh;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
}

.login-box {
  display: flex;
  flex-direction: column;
  align-items: center;
  background: white;
  border-radius: 20rpx;
  padding: 80rpx 60rpx;
  box-shadow: 0 10rpx 40rpx rgba(0,0,0,0.1);
}

.logo {
  width: 160rpx;
  height: 160rpx;
  margin-bottom: 40rpx;
}

.title {
  font-size: 36rpx;
  font-weight: bold;
  color: #333;
  margin-bottom: 60rpx;
}

.login-btn {
  width: 500rpx;
  height: 88rpx;
  line-height: 88rpx;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  border-radius: 44rpx;
  font-size: 32rpx;
  border: none;
}

.login-btn::after {
  border: none;
}
```

### 4. APIè¯·æ±‚å°è£…ï¼ˆæ¨èï¼‰

```javascript
// utils/request.js
const BASE_URL = 'https://your-domain.com';

/**
 * å°è£…è¯·æ±‚æ–¹æ³•
 */
function request(options) {
  return new Promise((resolve, reject) => {
    // è·å–token
    const token = wx.getStorageSync('token');
    
    wx.request({
      url: BASE_URL + options.url,
      method: options.method || 'GET',
      data: options.data || {},
      header: {
        'content-type': 'application/json',
        'Authorization': token ? `Bearer ${token}` : ''
      },
      success: (res) => {
        if (res.data.code === 200) {
          resolve(res.data.data);
        } else {
          // å¦‚æœtokenå¤±æ•ˆï¼Œè·³è½¬åˆ°ç™»å½•é¡µ
          if (res.data.code === 401) {
            wx.removeStorageSync('token');
            wx.reLaunch({
              url: '/pages/login/login'
            });
          }
          wx.showToast({
            title: res.data.message || 'è¯·æ±‚å¤±è´¥',
            icon: 'none'
          });
          reject(res.data);
        }
      },
      fail: (err) => {
        wx.showToast({
          title: 'ç½‘ç»œè¯·æ±‚å¤±è´¥',
          icon: 'none'
        });
        reject(err);
      }
    });
  });
}

/**
 * å¾®ä¿¡ç™»å½•
 */
export function wxLogin(data) {
  return request({
    url: '/api/user/wxLogin',
    method: 'POST',
    data: data
  });
}

/**
 * è·å–ç”¨æˆ·ä¿¡æ¯
 */
export function getUserInfo() {
  return request({
    url: '/api/user/info',
    method: 'GET'
  });
}

export default { request, wxLogin, getUserInfo };
```

### 5. ä½¿ç”¨å°è£…çš„API

```javascript
// pages/login/login.js
import { wxLogin } from '../../utils/request';

Page({
  /**
   * å¾®ä¿¡ç™»å½•ï¼ˆä½¿ç”¨å°è£…çš„APIï¼‰
   */
  async wxLogin() {
    try {
      wx.showLoading({ title: 'ç™»å½•ä¸­...' });
      
      // 1. è·å–code
      const { code } = await wx.login();
      
      // 2. è°ƒç”¨åç«¯æ¥å£
      const result = await wxLogin({ code });
      
      // 3. å­˜å‚¨tokenå’Œç”¨æˆ·ä¿¡æ¯
      wx.setStorageSync('token', result.token);
      wx.setStorageSync('userInfo', result.userInfo);
      
      // 4. è·³è½¬é¦–é¡µ
      wx.switchTab({ url: '/pages/index/index' });
      
      wx.showToast({
        title: result.isNewUser ? 'æ³¨å†ŒæˆåŠŸ' : 'ç™»å½•æˆåŠŸ',
        icon: 'success'
      });
      
    } catch (err) {
      wx.showToast({
        title: err.message || 'ç™»å½•å¤±è´¥',
        icon: 'none'
      });
    } finally {
      wx.hideLoading();
    }
  }
});
```

---

## ğŸ”’ å®‰å…¨æ³¨æ„äº‹é¡¹

### 1. AppSecretä¿æŠ¤

âš ï¸ **ç»å¯¹ä¸è¦**å°†AppSecretæš´éœ²åˆ°å°ç¨‹åºå‰ç«¯ä»£ç ä¸­ï¼

```javascript
// âŒ é”™è¯¯ç¤ºä¾‹ï¼ˆä¸è¦è¿™æ ·åšï¼‰
const appid = 'wx1234567890';
const secret = 'abcd1234567890';  // åƒä¸‡ä¸è¦è¿™æ ·ï¼

// âœ… æ­£ç¡®åšæ³•
// å°†codeå‘é€åˆ°åç«¯ï¼Œç”±åç«¯è°ƒç”¨å¾®ä¿¡æ¥å£
```

### 2. Tokenå®‰å…¨

```javascript
// å­˜å‚¨token
wx.setStorageSync('token', token);

// è¯·æ±‚æ—¶æºå¸¦token
wx.request({
  url: 'xxx',
  header: {
    'Authorization': 'Bearer ' + wx.getStorageSync('token')
  }
});
```

### 3. HTTPSè¦æ±‚

- âš ï¸ å°ç¨‹åºè¦æ±‚åç«¯æ¥å£å¿…é¡»ä½¿ç”¨HTTPS
- éœ€è¦åœ¨å¾®ä¿¡å…¬ä¼—å¹³å°é…ç½®æœåŠ¡å™¨åŸŸå
- å¼€å‘ > å¼€å‘ç®¡ç† > å¼€å‘è®¾ç½® > æœåŠ¡å™¨åŸŸå

---

## ğŸ“Š æµ‹è¯•æ­¥éª¤

### 1. åç«¯æµ‹è¯•

ä½¿ç”¨Postmanæˆ–curlæµ‹è¯•ï¼š

```bash
curl -X POST http://localhost:8080/api/user/wxLogin \
  -H "Content-Type: application/json" \
  -d '{
    "code": "081xxxxx"
  }'
```

### 2. å°ç¨‹åºæµ‹è¯•

1. åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­æ‰“å¼€é¡¹ç›®
2. ç‚¹å‡»ç™»å½•æŒ‰é’®
3. æŸ¥çœ‹æ§åˆ¶å°æ—¥å¿—
4. æ£€æŸ¥Storageä¸­æ˜¯å¦å­˜å‚¨äº†token
5. æµ‹è¯•åç»­éœ€è¦ç™»å½•çš„æ¥å£

---

## â“ å¸¸è§é—®é¢˜

### Q1: codeå·²ä½¿ç”¨æˆ–è¿‡æœŸ

**é—®é¢˜ï¼š** errcode: 40029

**åŸå› ï¼š** å¾®ä¿¡ç™»å½•çš„codeåªèƒ½ä½¿ç”¨ä¸€æ¬¡ï¼Œæœ‰æ•ˆæœŸ5åˆ†é’Ÿ

**è§£å†³ï¼š** é‡æ–°è°ƒç”¨`wx.login()`è·å–æ–°çš„code

### Q2: æœªé…ç½®AppIDå’ŒAppSecret

**é—®é¢˜ï¼š** å¾®ä¿¡æ¥å£è¿”å›å‚æ•°é”™è¯¯

**è§£å†³ï¼š** åœ¨`application.yml`ä¸­é…ç½®æ­£ç¡®çš„AppIDå’ŒAppSecret

### Q3: è¯·æ±‚å¤±è´¥

**é—®é¢˜ï¼š** å°ç¨‹åºè¯·æ±‚åç«¯æ¥å£å¤±è´¥

**è§£å†³ï¼š**
1. æ£€æŸ¥æœåŠ¡å™¨åŸŸåæ˜¯å¦å·²åœ¨å¾®ä¿¡å…¬ä¼—å¹³å°é…ç½®
2. ç¡®ä¿ä½¿ç”¨HTTPSï¼ˆå¼€å‘é˜¶æ®µå¯ä»¥å‹¾é€‰"ä¸æ ¡éªŒåˆæ³•åŸŸå"ï¼‰
3. æ£€æŸ¥åç«¯æœåŠ¡æ˜¯å¦æ­£å¸¸è¿è¡Œ

### Q4: tokenå¤±æ•ˆ

**é—®é¢˜ï¼š** æ¥å£è¿”å›401

**è§£å†³ï¼š** 
```javascript
// æ£€æµ‹åˆ°401åæ¸…é™¤tokenå¹¶é‡æ–°ç™»å½•
if (res.data.code === 401) {
  wx.removeStorageSync('token');
  wx.reLaunch({
    url: '/pages/login/login'
  });
}
```

---

## ğŸ“– å‚è€ƒèµ„æ–™

- [å¾®ä¿¡å°ç¨‹åºç™»å½•å®˜æ–¹æ–‡æ¡£](https://developers.weixin.qq.com/miniprogram/dev/framework/open-ability/login.html)
- [code2Sessionæ¥å£æ–‡æ¡£](https://developers.weixin.qq.com/miniprogram/dev/OpenApiDoc/user-login/code2Session.html)
- [Sa-Tokenå®˜æ–¹æ–‡æ¡£](https://sa-token.cc)
- [wx.login API](https://developers.weixin.qq.com/miniprogram/dev/api/open-api/login/wx.login.html)
- [wx.getUserProfile API](https://developers.weixin.qq.com/miniprogram/dev/api/open-api/user-info/wx.getUserProfile.html)

---

## âœ… æ£€æŸ¥æ¸…å•

åç«¯ï¼š
- [ ] é…ç½®AppIDå’ŒAppSecret
- [ ] æµ‹è¯•/api/user/wxLoginæ¥å£
- [ ] ç¡®è®¤è¿”å›æ•°æ®æ ¼å¼æ­£ç¡®
- [ ] æµ‹è¯•tokenæ˜¯å¦æœ‰æ•ˆ

å‰ç«¯ï¼š
- [ ] å®ç°ç™»å½•é¡µé¢
- [ ] è°ƒç”¨wx.loginè·å–code
- [ ] å°†codeå‘é€åˆ°åç«¯
- [ ] å­˜å‚¨token
- [ ] é…ç½®æœåŠ¡å™¨åŸŸåï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰
- [ ] æµ‹è¯•åç»­æ¥å£æºå¸¦token

---

**å®Œæˆæ—¶é—´ï¼š** 2024-11-07  
**åç«¯ç‰ˆæœ¬ï¼š** Spring Boot 3.4.0 + Sa-Token 1.37.0  
**å¾®ä¿¡APIç‰ˆæœ¬ï¼š** æœ€æ–°ç¨³å®šç‰ˆ

ğŸ‰ **ç™»å½•åŠŸèƒ½å·²å®Œæ•´å®ç°ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ï¼**

